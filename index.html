<html>
<head>
    <meta charset="utf-8"/>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>
    <link rel="stylesheet" media="all" href="application.css" data-turbolinks-track="true"/>
    <script src='javascript.js'></script>
    <script src='drawing.js'></script>
    <script src='math_helpers.js'></script>
    <script src='simulation.js'></script>
    <script src='searchers.js'></script>
    <script src='aira.js'></script>
    <script src='aira_optimal_variable_finder.js'></script>
    <style>
        #netDynamisch {
            padding-bottom: 50px;
        }
        .result {
            position: absolute;
            left:0;
            padding-left: 20px;
        }
    </style>
</head>
<body>

<div class="warm" style="height:100%;">
    <div id="aira-input">
        <div id="aira-buttons"></div>
        <div id="panel">
            <form>
                <label> Prediction </label>
                <select id='prediction' class="target">
                </select>

                <label> Interpolation </label>
                <select id='interpolation' class="target">
                </select>
            </form>
        </div>
    </div>

    <span class="result"></span><br>


    <div id="netDynamisch" class="svg-container centered-svg"
         style="-webkit-transform: scale(0.767354368932039, 0.767354368932039); transform: scale(0.767354368932039, 0.767354368932039); height: 245.553398058252px;">
        <div id="shock-div" style="height:30px;"><span id="shock"
                                                       style="font-size:150%; display:none; background-color:#ff0000;">!SHOCK!</span>
        </div>
        <svg width="515" height="320">
            <g class="network" transform="translate(130,70)">
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(248.23089196209892,26.447419123303288)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M255,196.9408269770093A196.94534889699744,196.94534889699744 0 0,1 253.6654132580671,0"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(227.9476318359375,98.6491470336914) rotate(-90.38826391874098) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(45.114191503530414,214.14937960980456)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M255,196.9408269770093A236.92524407589454,236.92524407589454 0 0,1 18.43493647544279,210.00000000000003"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(138.46707153320312,235.16412353515625) rotate(-183.15970927794552) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(17.548868903890572,22.06333189514605)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M255,196.9408269770093A321.2551399438468,321.2551399438468 0 0,1 0,1.5441408732255588"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(101.32176208496094,133.40597534179688) rotate(-142.53844343704534) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(260.4345212959682,170.493407853706)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M253.6654132580671,0A196.94534889699744,196.94534889699744 0 0,1 255,196.9408269770093"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(280.7177734375,98.29158020019531) rotate(89.61173608125902) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(41.874758291000816,196.59944951672176)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M253.6654132580671,0A315.33058400253657,315.33058400253657 0 0,1 18.43493647544279,210.00000000000003"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(164.1848602294922,136.514892578125) rotate(-221.7566115403841) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(26.4436671220929,6.996889642052434)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M253.6654132580671,0A253.67011304925603,253.67011304925603 0 0,1 0,1.5441408732255588"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(127.03953552246094,34.75679016113281) rotate(-180.3487730593624) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(228.32074497191235,192.79144736720477)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M18.43493647544279,210.00000000000003A236.92524407589454,236.92524407589454 0 0,1 255,196.9408269770093"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(134.96786499023438,171.77667236328125) rotate(-3.1597092779455136) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(230.22559144250909,13.400550483278288)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M18.43493647544279,210.00000000000003A315.33058400253657,315.33058400253657 0 0,1 253.6654132580671,0"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(107.91548156738281,73.48513793945312) rotate(-41.75661154038412) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(-3.2652867226465747,28.345967352383806)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M18.43493647544279,210.00000000000003A209.26942463517037,209.26942463517037 0 0,1 0,1.5441408732255588"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(-18.710329055786133,108.24189758300781) rotate(-95.05384366262123) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(237.45113109610944,176.42163595508882)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M0,1.5441408732255588A321.2551399438468,321.2551399438468 0 0,1 255,196.9408269770093"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(153.67808532714844,65.07888793945312) rotate(37.461556562954655) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="positive"
                          transform="translate(227.2217461359742,-5.4527487688268765)">+
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M0,1.5441408732255588A253.67011304925603,253.67011304925603 0 0,1 253.6654132580671,0"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(126.62584686279297,-33.21265411376953) rotate(-0.3487730593624017) scale(1)"></path>
                </g>
                <g class="link">
                    <text text-anchor="middle" dy="0.3em" class="negative"
                          transform="translate(21.700223198089365,183.19817352084178)">-
                    </text>
                    <path class="arclink" style="stroke-width: 1px;"
                          d="M0,1.5441408732255588A209.26942463517037,209.26942463517037 0 0,1 18.43493647544279,210.00000000000003"></path>
                    <path class="arrow" d="M0,-5L10,0L0,5"
                          transform="translate(37.145259857177734,103.30224609375) rotate(84.94615633737877) scale(1)"></path>
                </g>
                <g>
                    <circle class="node Positief" id="e" r="20" cx="255" cy="196.9408269770093"></circle>
                    <circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="255"
                            cy="196.9408269770093"></circle>
                </g>
                <g>
                    <circle class="node Negatief" id="prod" r="20" cx="253.6654132580671" cy="0"></circle>
                    <circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="253.6654132580671"
                            cy="0"></circle>
                </g>
                <g>
                    <circle class="node Positief" id="rw" r="20" cx="18.43493647544279"
                            cy="210.00000000000003"></circle>
                    <circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="18.43493647544279"
                            cy="210.00000000000003"></circle>
                </g>
                <g>
                    <circle class="node Negatief" id="u" r="20" cx="0" cy="1.5441408732255588"></circle>
                    <circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="0"
                            cy="1.5441408732255588"></circle>
                </g>
                <g class="labelNode" transform="translate(255,196.9408269770093)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text></text>
                </g>
                <g class="labelNode" transform="translate(272.7964813849756,214.49888069358667)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text dy="0.4em" text-anchor="start">e</text>
                </g>
                <g class="labelNode" transform="translate(253.6654132580671,0)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text></text>
                </g>
                <g class="labelNode" transform="translate(270.23112616156203,-18.723705722932685)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text dy="-0.1em" text-anchor="start">prod</text>
                </g>
                <g class="labelNode" transform="translate(18.43493647544279,210.00000000000003)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text></text>
                </g>
                <g class="labelNode" transform="translate(1.9674430480601792,228.8101477989704)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text dy="0.4em" text-anchor="end">rw</text>
                </g>
                <g class="labelNode" transform="translate(0,1.5441408732255588)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text></text>
                </g>
                <g class="labelNode" transform="translate(-18.03706940167313,-15.766668680322962)">
                    <circle r="0" style="fill: rgb(0, 0, 0);"></circle>
                    <text dy="-0.1em" text-anchor="end">U</text>
                </g>
            </g>
            <defs>
                <radialGradient id="nodeGrad" cx="30%" cy="30%" r="55%">
                    <stop offset="0%" stop-opacity="1.0" style="stop-color: rgb(255, 255, 255);"></stop>
                    <stop offset="5%" stop-opacity="1.0" style="stop-color: rgb(255, 255, 255);"></stop>
                    <stop offset="100%" stop-opacity="0.0" style="stop-color: rgb(255, 255, 255);"></stop>
                </radialGradient>
            </defs>
        </svg>
    </div>
    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
</div>

<script>
    $(document).ready(function () {
        var max_steps = 100;
        var max_interpolation = 500;

        var prediction_select = $('#prediction');
        var interpolation_select = $('#interpolation');

        inject_buttons();
        generateSelectOptions(1, max_steps, 1, '#prediction');
        generateSelectOptions(0, max_interpolation, 1, '#interpolation');

        prediction_select.find("option[value='" + max_steps / 2 + "']").attr('selected', 'selected');
        interpolation_select.find("option[value='" + (25 > max_interpolation? max_interpolation : 25) + "']").attr('selected', 'selected');
    });
</script>
</body>
</html>