<html>
<head>
  <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <link rel="stylesheet" media="all" href="application.css" data-turbolinks-track="true" />
    <script>var DEBUG = false;</script>
  <script src='javascript.js'></script>
  <script src='math_helpers.js'></script>
  <script src='aira.js'></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>


</head>
<body>

  <div class="warm" style="height:100%;">
    <div id="netGelijk"></div>
      <div id="netDynamisch" class="svg-container centered-svg" style="-webkit-transform: scale(1, 1); transform: scale(1, 1); height: 320px;"><svg width="515" height="320"><g class="network" transform="translate(130,70)"><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(24.72201736779794,137.49375277548097)">+</text><path class="arclink" style="stroke-width: 1px;" d="M175.06943202536587,22.526836497939225A215.59302952318762,215.59302952318762 0 0,1 0,148.34833048565918"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(104.39158630371094,108.89244079589844) rotate(-215.70460670857716) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(52.558714426782586,9.52951783300195)">-</text><path class="arclink" style="stroke-width: 1px;" d="M175.06943202536587,22.526836497939225A149.48026407831082,149.48026407831082 0 0,1 27.296325587432932,0"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(98.16488647460938,31.061256408691406) rotate(-171.33244294092046) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(156.44538641653577,146.8635056033937)">-</text><path class="arclink" style="stroke-width: 1px;" d="M175.06943202536587,22.526836497939225A152.00835176329048,152.00835176329048 0 0,1 145.86183277568713,171.7027566454698"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(180.45143127441406,101.02783203125) rotate(-258.9220269927393) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(150.34741465756795,33.38141420811742)">+</text><path class="arclink" style="stroke-width: 1px;" d="M0,148.34833048565918A215.59302952318762,215.59302952318762 0 0,1 175.06943202536587,22.526836497939225"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(70.67784881591797,61.98271179199219) rotate(-35.70460670857715) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(16.996144278527684,24.95809017139891)">-</text><path class="arclink" style="stroke-width: 1px;" d="M0,148.34833048565918A150.83871037786523,150.83871037786523 0 0,1 27.296325587432932,0"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(-6.2267374992370605,70.51710510253906) rotate(-79.57410451364856) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(120.67151211103132,161.9843336863774)">+</text><path class="arclink" style="stroke-width: 1px;" d="M0,148.34833048565918A147.71967872269613,147.71967872269613 0 0,1 145.86183277568713,171.7027566454698"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(76.05982971191406,140.4837646484375) rotate(9.096608976487783) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(149.80704318601622,12.997318664937273)">+</text><path class="arclink" style="stroke-width: 1px;" d="M27.296325587432932,0A149.48026407831082,149.48026407831082 0 0,1 175.06943202536587,22.526836497939225"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(104.20091247558594,-8.534414291381836) rotate(8.667557059079535) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(10.300181308905248,123.39024031426027)">-</text><path class="arclink" style="stroke-width: 1px;" d="M27.296325587432932,0A150.83871037786523,150.83871037786523 0 0,1 0,148.34833048565918"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(33.5230712890625,77.83119201660156) rotate(-259.57410451364854) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(135.47448223038282,146.7808195488281)">-</text><path class="arclink" style="stroke-width: 1px;" d="M27.296325587432932,0A208.6614869458698,208.6614869458698 0 0,1 145.86183277568713,171.7027566454698"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(109.58292388916016,69.96662902832031) rotate(55.373847034323695) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(164.48587838451726,47.36608754001536)">+</text><path class="arclink" style="stroke-width: 1px;" d="M145.86183277568713,171.7027566454698A152.00835176329048,152.00835176329048 0 0,1 175.06943202536587,22.526836497939225"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(140.47984313964844,93.20175170898438) rotate(-78.92202699273928) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="positive" transform="translate(25.190320664655808,158.06675344475158)">+</text><path class="arclink" style="stroke-width: 1px;" d="M145.86183277568713,171.7027566454698A147.71967872269613,147.71967872269613 0 0,1 0,148.34833048565918"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(69.80201721191406,179.56732177734375) rotate(-170.90339102351223) scale(1)"></path></g><g class="link"><text text-anchor="middle" dy="0.3em" class="negative" transform="translate(37.68367613273725,24.92193709664171)">-</text><path class="arclink" style="stroke-width: 1px;" d="M145.86183277568713,171.7027566454698A208.6614869458698,208.6614869458698 0 0,1 27.296325587432932,0"></path><path class="arrow" d="M0,-5L10,0L0,5" transform="translate(63.57526779174805,101.73615264892578) rotate(-124.62615296567631) scale(1)"></path></g><g><circle class="node Neutraal" id="eating_a_lot_of_candy" r="10" cx="255" cy="210"></circle><circle class="nodeGrad" r="10" style="fill: url(#nodeGrad);" cx="255" cy="210"></circle></g><g><circle class="node Negatief" id="e" r="20" cx="175.06943202536587" cy="22.526836497939225"></circle><circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="175.06943202536587" cy="22.526836497939225"></circle></g><g><circle class="node Positief" id="prod" r="20" cx="0" cy="148.34833048565918"></circle><circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="0" cy="148.34833048565918"></circle></g><g><circle class="node Positief" id="rw" r="20" cx="27.296325587432932" cy="0"></circle><circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="27.296325587432932" cy="0"></circle></g><g><circle class="node Negatief" id="u" r="20" cx="145.86183277568713" cy="171.7027566454698"></circle><circle class="nodeGrad" r="20" style="fill: url(#nodeGrad);" cx="145.86183277568713" cy="171.7027566454698"></circle></g><g class="labelNode" transform="translate(255,210)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text></text></g><g class="labelNode" transform="translate(267.8545711002293,217.730459354343)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text dy="0.4em" text-anchor="start">Eating a lot of candy</text></g><g class="labelNode" transform="translate(175.06943202536587,22.526836497939225)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text></text></g><g class="labelNode" transform="translate(189.19582895007107,1.900520541722539)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text dy="-0.1em" text-anchor="start">e</text></g><g class="labelNode" transform="translate(0,148.34833048565918)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text></text></g><g class="labelNode" transform="translate(-22.508914495536104,159.22715249140248)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text dy="0.4em" text-anchor="end">Prod</text></g><g class="labelNode" transform="translate(27.296325587432932,0)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text></text></g><g class="labelNode" transform="translate(11.733333471909758,-19.565103536965083)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text dy="-0.1em" text-anchor="end">rw</text></g><g class="labelNode" transform="translate(145.86183277568713,171.7027566454698)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text></text></g><g class="labelNode" transform="translate(142.9012759255919,196.5268397732986)"><circle r="0" style="fill: rgb(0, 0, 0);"></circle><text dy="0.4em" text-anchor="end">U</text></g></g><defs><radialGradient id="nodeGrad" cx="30%" cy="30%" r="55%"><stop offset="0%" stop-opacity="1.0" style="stop-color: rgb(255, 255, 255);"></stop><stop offset="5%" stop-opacity="1.0" style="stop-color: rgb(255, 255, 255);"></stop><stop offset="100%" stop-opacity="0.0" style="stop-color: rgb(255, 255, 255);"></stop></radialGradient></defs></svg></div>
      <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
</div>

<script>
$(document).ready(function(){
    inject_buttons();
    var_coefficients = [[1.7882516, 0.1949013, -0.084094128, 0.11716910, -1.2175403, -0.1011495, -0.004600462, -0.21240047, 0.4607406, -0.043924025, -0.00170015, 0.27501572, -0.05340928, 0.007395215, 0.08565463, -0.1871212],
        [-0.1434025, 1.1777061, 0.051717609, -0.72341422, -0.1856313, -0.1827150, -0.223365088, 0.65999277, 0.4372010, 0.049277377, 0.08473083, 0.50693900, -0.09505128, -0.070681395, 0.08362111, -0.4105609],
        [-0.5635340, -0.1032722, 0.868404043, 0.06140683, 0.7605549, -0.1631870, -0.106785400, -0.45862230, -0.4438344, 0.269430102, -0.02312552, -0.09951292, 0.31046631, -0.086729273, 0.21139926, 0.2803912],
        [-0.7296624, -0.1348578, 0.005928757, 0.57157062, 0.6387346, 0.1178550, 0.053104567, 0.03745348, -0.1017310, -0.001811418, -0.03468194, 0.08797242, 0.19575410, 0.020053093, -0.02997414, 0.2349770]];
    var lags = 4;
    var steps_ahead = 50;
    var nr_of_variables = var_coefficients.length;
    var shocks = createMatrix (0, nr_of_variables, steps_ahead, false);
    shocks[0] = makeFilledArray (steps_ahead, 1);
    shocks = transpose(shocks);
    printMatrix(shocks);

    var C = estimateVmaCoefficients(var_coefficients, steps_ahead, lags);
    var irf = calculateImpulseResponse(lags, shocks, C);

    console.log(irf[0]);

    var transposed_irf = transpose(irf[0]);
    labels = [];
    var i = 0;
    for( i = 0 ; i < steps_ahead; i++) {
        labels.push(i);
    }

        $('#container').highcharts({
            title: {
                text: 'Monthly Average Temperature',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: WorldClimate.com',
                x: -20
            },
            xAxis: {
                categories: labels
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                valueSuffix: '°C'
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [{
                name: 'e',
                data: transposed_irf[0]
            }, {
                name: 'prod',
                data: transposed_irf[1]
            }, {
                name: 'rw',
                data: transposed_irf[2]
            }, {
                name: 'U',
                data: transposed_irf[3]
            }]
        });
});
</script>
</body>
</html>